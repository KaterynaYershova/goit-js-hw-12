{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '44399697-8bf9b3cb5b10277b4ea62d601';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    console.error('Fetching images failed:', error);\n    throw error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst galleryElement = document.getElementById('gallery');\nlet lightbox;\n\nexport function renderImages(images) {\n  const markup = images\n    .map(\n      image => `\n    <li>\n      <a href=\"${image.largeImageURL}\" data-lightbox=\"gallery\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n      </a>\n      <div class=\"info\">\n        <div class=\"labels\">\n          <p>Likes</p>\n          <p>Views</p>\n          <p>Comments</p>\n          <p>Downloads</p>\n        </div>\n        <div class=\"values\">\n          <p>${image.likes}</p>\n          <p>${image.views}</p>\n          <p>${image.comments}</p>\n          <p>${image.downloads}</p>\n        </div>\n      </div>\n    </li>\n  `\n    )\n    .join('');\n\n  galleryElement.insertAdjacentHTML('beforeend', markup);\n\n  if (lightbox) {\n    lightbox.refresh();\n  } else {\n    lightbox = new SimpleLightbox('[data-lightbox=\"gallery\"]', {\n      captions: true,\n      captionSelector: 'img',\n      captionType: 'attr',\n      captionsData: 'alt',\n      captionPosition: 'bottom',\n      captionDelay: 250,\n    });\n  }\n}\n\nexport function showNoResultsMessage() {\n  iziToast.info({\n    title: 'Info',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    position: 'topRight',\n  });\n}\n\nexport function showLoader() {\n  document.getElementById('loader').style.display = 'block';\n}\n\nexport function hideLoader() {\n  document.getElementById('loader').style.display = 'none';\n}\n\nexport function showLoadMoreButton() {\n  document.getElementById('load-more').style.display = 'block';\n}\n\nexport function hideLoadMoreButton() {\n  document.getElementById('load-more').style.display = 'none';\n}\n\nexport function showEndOfResultsMessage() {\n  iziToast.info({\n    title: 'Info',\n    message: \"We're sorry, but you've reached the end of search results.\",\n    position: 'topRight',\n  });\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport {\n  renderImages,\n  showNoResultsMessage,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  showEndOfResultsMessage,\n} from './js/render-functions.js';\n\nlet query = '';\nlet page = 1;\nconst perPage = 15;\nlet totalHits = 0;\n\ndocument\n  .getElementById('search-form')\n  .addEventListener('submit', async event => {\n    event.preventDefault();\n\n    query = document.getElementById('search-input').value.trim();\n    if (!query) {\n      iziToast.warning({\n        title: 'Warning',\n        message: 'Please enter a search term!',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    showLoader();\n    hideLoadMoreButton();\n    document.getElementById('gallery').innerHTML = '';\n    page = 1;\n\n    try {\n      const { hits, totalHits: newTotalHits } = await fetchImages(\n        query,\n        page,\n        perPage\n      );\n      totalHits = newTotalHits;\n\n      if (hits.length === 0) {\n        showNoResultsMessage();\n      } else {\n        renderImages(hits);\n        if (totalHits > perPage) {\n          showLoadMoreButton();\n        }\n      }\n    } catch (error) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Something went wrong while fetching images. Please try again later.',\n        position: 'topRight',\n      });\n    } finally {\n      hideLoader();\n    }\n  });\n\ndocument.getElementById('load-more').addEventListener('click', async () => {\n  page += 1;\n  showLoader();\n  hideLoadMoreButton();\n\n  try {\n    const { hits } = await fetchImages(query, page, perPage);\n\n    if (hits.length === 0) {\n      showEndOfResultsMessage();\n    } else {\n      renderImages(hits);\n      if (page * perPage >= totalHits) {\n        hideLoadMoreButton();\n        showEndOfResultsMessage();\n      } else {\n        showLoadMoreButton();\n      }\n\n      const { height: cardHeight } = document\n        .querySelector('.gallery li')\n        .getBoundingClientRect();\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message:\n        'Something went wrong while fetching images. Please try again later.',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","url","axios","error","galleryElement","lightbox","renderImages","images","markup","image","SimpleLightbox","showNoResultsMessage","iziToast","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","showEndOfResultsMessage","totalHits","event","hits","newTotalHits","cardHeight"],"mappings":"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"}